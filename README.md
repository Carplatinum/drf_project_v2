# Django LMS Project

Система управления обучением (LMS), разработанная с использованием Django и Django REST Framework.

## О проекте

Данный проект представляет собой платформу для управления курсами и уроками с поддержкой регистрации пользователей, их аутентификации через JWT и разграничением прав доступа. В проекте реализованы функции управления курсами, уроками и платежами пользователей.

## Особенности

- Кастомная модель пользователя с правами доступа
- Создание, редактирование и просмотр курсов и уроков
- JWT аутентификация с расширенным токеном
- Разграничение прав доступа для владельцев, модераторов и обычных пользователей
- Загрузка и хранение медиа (превью курсов и уроков)
- Управление платежами и история оплат
- REST API для фронтенда

## Технологии

- Python 3.13
- Django 4.x
- Django REST Framework
- PostgreSQL
- rest_framework_simplejwt для JWT аутентификации
- python-dotenv для работы с переменными окружения
- Poetry для управления зависимостями и виртуальным окружением

## Установка

1. Клонируйте репозиторий:
git clone https://github.com/Carplatinum/drf_project_v2

2. Перейдите в каталог проекта:
cd drf_project

3. Настройте и активируйте виртуальное окружение с Poetry (рекомендуется):

- Включите создание виртуального окружения в папке `.venv` внутри проекта:
  ```
  poetry config virtualenvs.in-project true
  ```

- Установите зависимости и создайте виртуальное окружение:
  ```
  poetry install
  ```

- Активируйте виртуальное окружение:
  ```
  poetry shell
  ```

- При необходимости выберите версию Python:
  ```
  poetry env use python3.13
  ```

4. Создайте файл `.env` на основе `.env.sample` с вашими переменными окружения.
5. Выполните миграции:
python manage.py migrate

6. Запустите сервер разработки:
python manage.py runserver

## Использование API

- Регистрация пользователя: `POST /users/register/`
- Получение JWT токена: `POST /users/token/`
- Операции с курсами: эндпоинт `/courses/`
- Операции с уроками: эндпоинт `/lessons/`
- Платежи: эндпоинт `/payments/`

# Запуск проекта через Docker Compose

## 1. Подготовка
- Скопируйте шаблон `.env.example` в `.env` и заполните значения.
- Убедитесь, что `.env` содержит правильные значения для подключения к базам и сервисам.

## 2. Запуск проекта

   docker-compose up --build

Эта команда соберёт контейнеры и запустит все сервисы вместе.

## 3. Проверка работы сервисов
- Backend Django будет доступен по адресу: http://localhost:8000/
- PostgreSQL слушает порт 5432
- Redis слушает порт 6379
- Celery и Celery Beat запускаются и выполняют задачи (логи видны в терминале)

## 4. Остановка контейнеров

   docker-compose down


## Лицензия

MIT License